<html>
<head>
  <title>Golf Stuff - Tournaments</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>

<body>
  <div id="wrap">
      <%=render "header_menu"%>
      <%= image_tag("ball.jpg", :alt => "golf ball", :class => "img-banner") %>

      <div class="container">

          <h1>Tournaments</h1>

            <table class="table main-table">
                <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Location</th>
                  <th>Date</th>
                  <th>Actions</th>
                  <th></th>
                  <th></th>
                </tr>
                <% @tournaments.each do |t| %>
                <% if t.is_private == 0 %>
                  <tr>
                      <td><%= t.id %></td>
                      <td><%= t.name %></td>
                      <% if !t.golf_course_id.nil?%>
                        <% @gf = GolfCourse.find(t.golf_course_id)%>
                        <td><%= @gf.name %></td>
                      <% else %>
                        <td><%= t.location %></td>
                      <% end %>
                      <td><%= t.date %></td>
                      <td>
                        <%= link_to "Details", tournament_path(t), :class=>"btn-small button button_new" %>
                      </td>
                      <td>
                        <% if current_user.nil? || !current_user.played_in?(t) %>
                              <%= link_to "PLAY!", {:controller => "tickets", :action => "new", :params => {:event_id => t.id}, :method=> :get}, {:class=>"btn-small button button_new"} %>
                        <% else %>
                              <%= link_to "Stop playing", join_path(:id => t.id, :params => {:event_id => t.id, :join => 0}), :method=> :delete, data: { confirm: 'Are you sure?' }, :class=>"btn-small button button_new_stop" %>
                        <% end %>
                      </td>
                  </tr>
                <% end %>
                <% end %>
            </table>

            <%= link_to 'New Tournament', "/tournaments/new", :class => "btn button button_new" %>

      </div> <!--End of container-->

      <div id="push"></div>
    </div><!-- End of wrap -->

    <%= render "footer" %>

</body>
</html>
